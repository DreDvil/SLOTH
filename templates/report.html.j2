<!doctype html>
<html><head><meta charset="utf-8"><title>Scanner Orchestrator Report</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu; margin:24px; color:#111; background:#fff}
.container{max-width:1100px;margin:0 auto}
.card{border:1px solid #e5e7eb;border-radius:14px;padding:16px;margin:12px 0}
.pill{display:inline-block;padding:2px 10px;border-radius:999px;font-size:12px;border:1px solid #e5e7eb}
.ok{background:#ecfdf5;border-color:#a7f3d0}
.bad{background:#fef2f2;border-color:#fecaca}
.skip{background:#f3f4f6;border-color:#e5e7eb}
pre{background:#0b1020;color:#e5e7eb;padding:12px;border-radius:12px;overflow:auto;max-height:280px;white-space:pre-wrap;word-break:break-word}
table{width:100%;border-collapse:collapse;table-layout:fixed}
th,td{border-bottom:1px solid #e5e7eb;padding:10px;vertical-align:top;text-align:left;word-break:break-word}
th{background:#f9fafb}
.muted{color:#6b7280}
</style></head>
<body>
<div class="container">
<h1>Scanner Orchestrator Report</h1>
<div class="card">
  <div><span class="muted">Target:</span> <b>{{ summary.target }}</b></div>
  <div><span class="muted">Profile:</span> <b>{{ summary.profile }}</b></div>
  <div><span class="muted">Started UTC:</span> <b>{{ summary.started_utc }}</b></div>
  <div class="muted">Run dir: {{ summary.run_dir }}</div>
</div>
<div class="card">
  <h2 style="margin-top:0">Steps</h2>
  <table>
    <thead><tr><th style="width:160px">Step</th><th style="width:110px">Status</th><th style="width:110px">Elapsed</th><th>Output (tail)</th></tr></thead>
    <tbody>
    {% for s in summary.steps %}
      <tr>
        <td><b>{{ s.step }}</b></td>
        <td>
          {% if s.status == 'done' %}<span class="pill ok">done</span>{% endif %}
          {% if s.status == 'failed' %}<span class="pill bad">failed</span>{% endif %}
          {% if s.status == 'skipped' %}<span class="pill skip">skipped</span>{% endif %}
        </td>
        <td>{{ s.elapsed_sec if s.elapsed_sec is defined else '' }}</td>
        <td>
          <div class="muted">log: {{ s.log_file | replace(summary.run_dir + '/', '') }}</div>
          {% if s.tail %}<pre><code>{{ s.tail }}</code></pre>{% else %}<span class="muted">no output</span>{% endif %}
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
</div>
</body></html>
